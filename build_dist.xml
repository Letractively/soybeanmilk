<?xml version="1.0" encoding="UTF-8"?>
<project name="build_version" default="cleanAfterDist" basedir=".">

	<!--类文件夹-->
	<property name="classDir" value="../bin" />
	
	<!--发布目录-->
	<property name="distDir" value="dist" />
	
	<!-- 版本 -->
	<property name="appVersion" value="1.0-beta" />
	
	<!-- 名称 -->
	<property name="appName" value="soybeanMilk-${appVersion}" />
	
	<!-- 示例工程名 -->
	<property name="exampleProjectName" value="soybeanMilkExample" />
	
	<!--打jar包-->
	<target name="jarFramework">
		<delete file="${distDir}/${appName}.jar" />
		<jar destfile="${distDir}/${appName}.jar" basedir="${classDir}"
			includes="org/**/*.class, org/**/*.dtd, org/**/*.xml" />
	</target>
	
	<!--压缩示例工程-->
	<target name="zipExampleProject" depends="jarFramework">
		<delete file="docs/example/web/${exampleProjectName}.zip" />
		<zip destfile="docs/example/web/${exampleProjectName}.zip" basedir="../../${exampleProjectName}" />
	</target>
	
	<!--拷贝API到docs下-->
	<target name="copyApiToDocs" depends="zipExampleProject">
		<delete dir="docs/api" />
		<mkdir dir="docs/api"/>
		<copydir dest="docs/api" src="../api" />
	</target>
	
	<!--将整个docs打成zip文件-->
	<target name="zipDocsToDist" depends="copyApiToDocs">
		<delete file="${distDir}/${appName}.docs.zip" />
		<zip destfile="${distDir}/${appName}.docs.zip" basedir="docs" />
	</target>
	
	<target name="cleanAfterDist" depends="zipDocsToDist">
		<delete dir="docs/api" />
	</target>
</project>